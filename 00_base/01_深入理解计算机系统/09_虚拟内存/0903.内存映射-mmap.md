1. 内存映射，- 文件映射，匿名映射
3. mmap - 零拷贝



#### 1.内存映射

- 内存映射分为文件映射和匿名映射

##### 1.1.文件映射

- 文件映射是指代表这个映射的vma对应到一个文件中的某个区域。
- 应用程序获取某个文件的数据，通常做法是open一个文件，然后调用read/write去读写文件，很少使用文件映射的方式。
- 底层native开发中，用户程序也可以使用mmap系统调用将一个文件的某个部分映射到内存上（对应到一个vma），然后以访问内存的方式去读写文件。
  - 用户程序很少使用mmap，但是用户进程中正在执行的可执行代码（包括可执行文件，lib库文件），都是以mmap的方式进行映射的。

##### 1.2.零拷贝

- 文件映射是将文件的磁盘高速缓存中的页面直接映射到了**用户空间（mapping file区）**，用户可以0拷贝地对文件进行读写。
- 而使用read/write的话，则会在用户空间的内存和磁盘高速缓存间发生一次拷贝

##### 1.3.匿名映射

- 匿名映射相对于文件映射，代表这个映射的vma没有对应到文件。
- 用户空间普通的内存分配（堆空间，栈空间），都属于匿名映射。
- 每个进程可能通过各自的文件映射来映射到同一个文件上（比如glibc的so文件），匿名映射是在多个进程中通过各自的匿名映射来映射同一段无力内存。
  - 比如fork之后父子进程共享原来的无力内存（copy on write）

#### 2.mmap



























https://blog.csdn.net/bbzhaohui/article/details/81665370

https://www.cnblogs.com/huxiao-tee/p/4660352.html

