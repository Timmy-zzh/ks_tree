### 网络编程

#### 1.客户端-服务器模型

##### 1.1.每个网络应用都是基于客户端-服务器模型的

- 一个应用是由一个服务器进程和一个或多个客户端进程组成。
- 服务器管理某种资源，并且通过操作这种资源来为他的客户端提供某种服务

##### 1.2.客户端-服务器模型中的基本操作是事务，有四步组成：

- 1.当一个客户端需要服务时，它向服务器发送一个请求，发起一个事务
- 2.服务器收到请求后，解释它，并以适当的方式操作他的资源。
- 3.服务器给客户端发送一个响应，并等待下一个请求
- 4.客户端收到响应并处理它。

![1.客户端-服务器事务](/Users/zhuzhonghua036/study1/github/ks_tree/00_base/01_深入理解计算机系统/11_网络编程/res0/1.客户端-服务器事务.png)

**客户端和服务器是进程，不是主机； 一台主机可以同时运行多个不同的客户端和服务器**

#### 2.网络

- LAN（Local Area Network,局域网）
- 多个不兼容的局域网通过**叫做路由器（router）的特殊计算机连接起来**，组成一个互联网络（internet）
- WAN（Wide-Area Network，广域网）

##### 2.1.网络协议

- 网络由完全不同和不兼容技术的各种局域网和广域网组成。每台主机和其他主机都是物理相连的，但是**如何让某台源主机跨过所有这些不兼容的网络发送数据到另一台目的主机呢？**

**==>解决办法是一层运行在每台主机和路由器上的协议软件**,它消除了不同网络之间的差异，控制主机和路由器协同工作来实现数据传输。

- 协议提供两种基本能力：
  - 命名机制：互联网络协议为每台主机分配至少一个互联网络地址（internet address）,这个地址唯一地标示了这台主机。
  - 传送机制：互联网络协议通过将数据位封装成不连续的片（包）进行数据传输，
    - 一个包由包头和有效载荷组成
    - 包头包括包的大小和源主机和目的主机的地址，有效载荷包括从源主机发出的数据位。

#### 3.IP因特网

- 每台因特网主机都运行实现TCP/IP协议的软件，客户端和服务器使用套接字接口函数进行通信

##### 3.1.IP协议—网络层协议

- IP协议提供了基本的命名方法和传送机制，传送机制能够从一台因特网主机往其他主机发送包，也叫做数据报（datagram）
- IP机制是不可靠的，如果数据报在网络中丢失或者重复，他不会试图恢复

##### UDP：

- 稍微扩展了IP协议，使**得包可以在进程间而不是在主机间传送。**

##### TCP：

- TCP是一个构建在IP之上的复杂协议，提供了**进程间**可靠的全双工（双向的）链接

##### IP地址：

- 32位无符号整数，

##### 3.2.域名（domain name）

- 将域名映射到IP地址的机制
- 域名层级

##### 3.3.因特网链接 — 套接字

- 客户端和服务器通过在连接上发送和接收字节流来通信，连接是点对点，全双工，可靠的。
- 一个套接字是连接的一个端点，每个套接字都有相应的套接字地址。（由ip地址和端口组成）



#### 4.套接字接口 — Socket













