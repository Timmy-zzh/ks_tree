- ClassLoader的主要作用就是用来将class字节码加载到内存中，那JVM加载class文件的具体过程市怎样的呢？
- 一个class文件被加载到内存中需要经过3大步：装载，链接，初始化
  - 其中链接又细分为：验证，准备，解析3小步

<img src=".\res4\1.class文件加载到内存过程.png" alt="1.class文件加载到内存过程" style="zoom:99%;" />

#### 1.装载

- 装载是指Java虚拟机查找.class文件并生成字节流，然后根据字节流创建java.lang.Class对象的过程
- 装载过程主要完成3件事
  1. ClassLoader通过一个类的全限定名（包名+类名）来查找.class文件，并生成二进制字节流
     - 其中class字节码文件的来源不一定是.class文件，也可以市jar包，zip包，甚至市来源于网络的字节流
  2. 把.class文件的各个部分分别解析（parse）为JVM内部特定的数据结构，并存储在方法区
  3. 在内存中创建一个java.lang.Class类型的对象：
     - 接下来程序在运行过程中所有对该类的访问都通过这个类对象，也就是这个Class类型的类对象是提供给外界访问该类的接口
- 一个项目经过编译之后，往往会生成大量的.class文件。当程序运行时，jvm并不会一次性的将所有.class文件全部加载到内存中。以下两种情况一般会对class进行装载操作
  - 隐式装载：在程序运行过程中，当碰到通过new等方式生成对象时，系统会隐式调用ClassLoader去装载对应的class到内存中
  - 显示装载：在编写源代码时，主动调用Class.forName()等方法也会进行class装载操作，这种方式通常称为显示装载

#### 2.链接

- 链接过程分为3步：验证，准备，解析

##### 2.1.验证

- 验证的目的是为了确保.class文件的字节流中包含的信息符合虚拟机的要求，并且不会危及虚拟机本身的安全。主要包含以下几个方面的检验
  1. 文件格式检验：检验字节流是否符合class文件格式的规范，并且能被当前版本的虚拟机处理
  2. 元数据检验：对字节码描述的信息进行语义分析，以保证其描述的内容符合Java语言规范的要求
  3. 字节码检验：通过数据流和控制流分析，确定程序语义是合法，符合逻辑的
  4. 符号引用检验：符号引用检验可以看作是对类自身以外（常量池中的各种符号引用）的信息进行匹配性校验

实例：

~~~java

~~~

























