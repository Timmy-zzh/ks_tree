#### 1.HTTP

- HTTP协议是超文本传输协议（Hyper Text Transfer Protocol）的缩写，是用于从万维网（www）服务器传输超文本到本地浏览器的传送协议
- 我们使用http来访问web上某个资源，比如html/文本，word，avi电影，其他资源。
- Http使用统一资源标识符（URI）来传输数据和建立连接，URL是一种特殊类型的URI
  - URI是统一资源标识符
  - URL是统一资源定位符
  - 每个URL都是URI，但不一定每个URI都是URL

##### 一个完整的URL

**http://www.enjoyedu.com:8080/news/index.asp?boardID=5&ID=24618&page=1#name**

1. 协议部分：该URL的协议部分是“http：”，这代表网页使用的是HTTP协议。
   - 在Internet中可以使用多种协议，如HTTP，FTP等等，在HTTP后面的“//”为分隔符
2. 域名部分：该URL的域名部分为“www.engoyedu.com” ，一个URL中，也可以使用IP地址作为域名使用
3. 端口部分：跟在域名后面的是端口，域名和端口之间使用 “：”作为分隔符。
   - 端口不是一个URL必须的部分，如果省了端口部分，将采用默认端口
4. 虚拟目录部分：从域名后的第一个“/”开始到最后一个“/” 为止，是虚拟目录部分。
   - 虚拟目录也不是一个URL必须的部分，本例中的虚拟目录是/news/
5. 文件名部分：从域名后的最后一个“/” 开始到“？”为止，是文件名部分，如果没有“？”，则是从域名后的最后一个“/” 开始到“#” 为止，是文件部分，如果没有“？”和“#”，那么域名后的最后一个“/”开始到结束，都是文件名部分
   - 本例中的文件名是“ index.asp”,文件名也不是URL必须的部分，如果没有，则使用默认的文件名
6. 参数部分：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分，查询部分。
   - 本例中的参数部分为“boardID=5&ID=24618&page=1”，参数可以允许由多个，参数与参数之间使用“&”作为分隔符
7. 锚部分：从“#”开始到最后，都是锚部分

#### 2.一次完整的http请求过程

1. 首先进行DNS域名解析（本地浏览器缓存，操作系统缓存或者DNS服务器），首先会搜索浏览器自身的DNS缓存（缓存时间比较短，大概只有1分钟，且只能容纳1000条缓存）
   - 如果浏览器自身的缓存里面没有找到，那么浏览器会搜索系统自身的DNS缓存
   - 如果还没有找到，那么尝试从hosts文件里面去找
   - 在前面三个过程都没有获取到的情况下，就去域名服务器去查找
2. 三次握手建立TCP连接
   - 在HTTP工作开始之前，客户端首先通过网络与服务器建立连接，HTTP连接时通过TCP来完成的。
   - HTTP是比TCP更高层次的应用层协议，根据规则，只有底层协议建立之后，才能进行高层协议的来凝结，因此，首先要建立TCP连接，一般TCP连接的端口是80
3. 客户端发起HTTP请求
4. 服务端响应HTTP请求
5. 客户端解析html代码，并请求html代码中的资源
   - 浏览器拿到html文件后，就开始解析其中的html代码，遇到js/css/image等静态资源时，就向服务器端去请求下载
6. 客户端渲染展示内容
7. 关闭TCP连接

##### 一般情况下，一旦服务器向客户端返回了请求数据，它就要关闭TCP连接

- 如果客户端或者服务器在其头部信息加入Connection:kttp-alive，TCP连接在发送后将仍然保持打开状态。
- 于是，客户端可以继续通过相同的连接发送请求，也就说前面的3到6步骤，可以反复进行。
- 保持连接节省了为每个请求建立新连接所需的时间，还节约了网络宽带

<img src=".\res3\1.http请求过程.png" alt="1.http请求过程" style="zoom:70%;" />

#### 3.DNS劫持和HTTP劫持



















