#### JVM内存划分区域

java虚拟机在执行java程序的过程中，会把它所管理的内存划分为不同的数据区域，下图描述了一个.java文件被JVM加载到内存中的过程

- HelloWorld.java文件首先需要经过编译器编译，生成HelloWorld.class字节码文件
- Java程序中访问到HelloWorld这个类时，需要通过ClassLoader（类加载器）将HelloWorld.class加载到JVM的内存中
- JVM中的内存可以划分为若干个不同的数据区域，主要分为：**程序计数器，虚拟机栈，本地方法栈，堆，方法区**

<img src=".\res\java文件加载运行过程.png" alt="java文件加载运行过程" style="zoom:48%;" />

#### 1.程序计数器

**程序计数器 是虚拟机中一块较小的内存空间，主要用于记录当前线程执行的位置**

- 背景
  - Java程序时多线程的，CPU在多个线程中分配执行时间片段（RR调度算法）。
  - 当一个线程被CPU挂起时，需要记录代码已经执行到的位置，当CPU重新执行此线程时，需要知道从那行指令继续执行，这就是程序计数器的作用

- 注意点
  - 在Java虚拟机规范中，对程序计数器这一区域没有规定任何OutOfMemoryError情况（或许是感觉没有必要把）
  - 程序计数器是线程私有的，每条线程内部都有一个私有程序计数器。它的生命周期随着线程的创建和结束。
  - 当一个线程正在执行一个java方法的时候，这个计数器记录的是正在执行的**虚拟机字节码指令**的地址。如果正在执行的是Native方法，这个计数器值则为空（Undefined）























